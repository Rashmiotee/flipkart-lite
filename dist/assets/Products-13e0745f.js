import{r as i,o as R,p as A,q as L,s as D,B as f,j as e}from"./index-4043e461.js";import{u as I,c as B,a as p}from"./index.esm-1726fb08.js";import{S as U}from"./Spinner-a23edf41.js";import{C as N}from"./Container-0abe7692.js";import{R as k}from"./Row-d15c3286.js";import{C as F}from"./Col-b4127909.js";import{C as m}from"./Card-20150986.js";import{F as a}from"./Form-ce88fc19.js";import{B as d}from"./Button-4433769c.js";import"./ThemeProvider-77305239.js";import"./CardHeaderContext-ca8825a6.js";import"./index-a1ae3952.js";import"./ElementChildren-c68d5b78.js";import"./Button-7db2f9f9.js";const Z=()=>{const[S,g]=i.useState(!1),[l,b]=i.useState([]),{data:y}=R(),[E,{isSuccess:P,isLoading:w}]=A(),[q,{isSuccess:h}]=L(),[v,{isSuccess:u,isLoading:H}]=D(),[r,x]=i.useState(),[C,j]=i.useState(),o=I({enableReinitialize:!0,initialValues:{name:r?r.name:"",price:r?r.price:"",desc:r?r.desc:"",qty:r?r.qty:"",hero:r?r.hero:""},validationSchema:B({name:p().required("Enter Name"),price:p().required("Enter price"),desc:p().required("Enter desc"),qty:p().required("Enter qty")}),onSubmit:(s,{resetForm:c})=>{if(r){const t=new FormData;for(const n in s)n!=="hero"&&t.append(n,s[n]);for(const n of s.hero)t.append("hero",n);for(const n of l)t.append("remove",n);v({_id:r._id,fd:t}),x(null)}else{const t=new FormData;for(const n in s)n!=="hero"&&t.append(n,s[n]);for(const n of s.hero)t.append("hero",n);E(t)}j([]),c()}});return i.useEffect(()=>{P&&(console.log("innnn"),f.success("Product deleted success"))},[P]),i.useEffect(()=>{h&&f.error("Product deleted success")},[h]),i.useEffect(()=>{u&&f.success("Product updated success")},[u]),e.jsx(e.Fragment,{children:w||h||u?e.jsxs(e.Fragment,{children:["pleasee wait......",e.jsx(U,{})]}):e.jsx(N,{children:e.jsx(k,{children:e.jsxs(F,{children:[e.jsxs(m,{children:[e.jsx(m.Header,{children:" Proctuct Detail"}),e.jsx(m.Body,{children:e.jsx("form",{onSubmit:o.handleSubmit,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(a.Control,{...o.getFieldProps("name"),className:"mb-3  ",type:"text",placeholder:"Enter Product"}),e.jsx("span",{className:"invalid-feedback",children:o.errors.name}),e.jsx(a.Control,{...o.getFieldProps("price"),className:"mb-3 ",type:"number",placeholder:"Enter price"}),e.jsx("span",{className:"invalid-feedback",children:o.errors.price}),e.jsx(a.Control,{...o.getFieldProps("desc"),className:"mb-3 ",type:"text",placeholder:"Enter desc"}),e.jsx("span",{className:"invalid-feedback",children:o.errors.desc}),e.jsx(a.Control,{...o.getFieldProps("qty"),className:"mb-3 ",type:"number",placeholder:"Enter qty"}),e.jsx("span",{className:"invalid-feedback",children:o.errors.qty}),r?e.jsxs(e.Fragment,{children:[r.hero.map(s=>e.jsx("div",{children:e.jsxs("div",{className:`${l.includes(s)&&"border border-danger my-2"}
                                                                      d-flex justify-content-between align-items-center px-4`,children:[e.jsx("img",{src:s,height:50,className:"me-2 rounded-3"}),l.includes(s)?e.jsx(d,{onClick:c=>b(l.filter(t=>s!==t)),variant:"dark",children:"cancle"}):e.jsx(d,{onClick:c=>{l.includes(s)||b([...l,s])},children:"Remove"})]})})),S?e.jsxs(e.Fragment,{children:[e.jsx(a.Control,{className:"mb-3 ",type:"file",multiple:!0,onChange:s=>{const c=[];for(const t of s.target.files)c.push(URL.createObjectURL(t));o.setFieldValue("hero",s.target.files),j(c)},placeholder:"Enter Product hero"}),e.jsx(d,{onClick:s=>g(!1),variant:"dark",children:"cancle"})]}):e.jsx(d,{onClick:s=>g(!0),className:"my-3",children:"Add new img"})]}):e.jsx(e.Fragment,{children:e.jsx(a.Control,{className:"mb-3 ",type:"file",multiple:!0,onChange:s=>{const c=[];for(const t of s.target.files)c.push(URL.createObjectURL(t));j(c),o.setFieldValue("hero",s.target.files)},placeholder:"Enter Product hero"})}),C&&C.map(s=>e.jsx("img",{src:s,height:50})),r?e.jsxs(e.Fragment,{children:[e.jsx(d,{type:"submit",variant:"warning",className:"w-100 btn-lg",children:"update product"}),e.jsx(d,{type:"button",onClick:s=>x(null),className:"w-100  btn-lg",children:"cancle product"})]}):e.jsx(d,{type:"submit",className:"w-100  btn-lg",children:"Add product"})]})})})]}),e.jsx(N,{children:e.jsx(k,{children:e.jsx(F,{children:e.jsxs(m,{children:[e.jsx(m.Header,{children:"All Products"}),e.jsx(m.Body,{children:e.jsxs("table",{class:"table table-dark table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"name"}),e.jsx("th",{scope:"col",children:"price"}),e.jsx("th",{scope:"col",children:"desc"}),e.jsx("th",{scope:"col",children:"qty"}),e.jsx("th",{scope:"col",children:"product Img"}),e.jsx("th",{scope:"col",children:"actions"})]})}),e.jsx("tbody",{children:y&&y.result.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.price}),e.jsx("td",{children:s.desc}),e.jsx("td",{children:s.qty}),e.jsx("td",{children:s.hero.map(c=>e.jsx("img",{src:c,height:50,className:"mx-2 rounded"}))}),e.jsxs("td",{children:[e.jsx(d,{type:"submit",onClick:c=>x(s),className:"me-2",variant:"warning",children:"Edit"}),e.jsx(d,{type:"submit",onClick:c=>q(s._id),className:"me-2",variant:"danger",children:"Delete"})]})]},s._id))})]})})]})})})})]})})})})};export{Z as default};
